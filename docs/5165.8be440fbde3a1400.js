"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5165],{5165:(Cn,me,x)=>{x.r(me),x.d(me,{DetailInfoComponent:()=>Mn});var b=x(5861),ee=x(3913),w=x(6814),E=x(95),h=x(9843),I=x(1230),e=x(9468);const qe=o=>o.querySelector("input,textarea")||o,L={mask:/^.*$/,preprocessors:[],postprocessors:[],plugins:[],overwriteMode:"shift"};class Ue{constructor(){this.now=null,this.past=[],this.future=[]}undo(){const a=this.past.pop();a&&this.now&&(this.future.push(this.now),this.updateElement(a,"historyUndo"))}redo(){const a=this.future.pop();a&&this.now&&(this.past.push(this.now),this.updateElement(a,"historyRedo"))}updateHistory(a){if(!this.now)return void(this.now=a);const n=this.now.value!==a.value,t=this.now.selection.some((i,s)=>i!==a.selection[s]);!n&&!t||(n&&(this.past.push(this.now),this.future=[]),this.now=a)}updateElement(a,n){this.now=a,this.updateElementState(a,{inputType:n,data:null})}}function z(o){return"string"==typeof o}function pe(o,a,n,t){let i="";for(let s=a.length;s<o.length;s++){const r=o[s],c=(null==t?void 0:t.value[s])===r;if(!z(r)||r===n&&!c)return i;i+=r}return i}function he(o,a){return Array.isArray(a)?o.length===a.length&&Array.from(o).every((n,t)=>{const i=a[t];return z(i)?n===i:n.match(i)}):a.test(o)}function V(o,a,n=null){if(he(o.value,a))return o;const{value:t,selection:i}=Array.isArray(a)?function Ve(o,a,n){let t=null,i=null;const s=Array.from(o.value).reduce((c,l,u)=>{const m=c+pe(a,c,l,n),p=a[m.length];return z(p)?m+p:l.match(p)?(null===t&&u>=o.selection[0]&&(t=m.length),null===i&&u>=o.selection[1]&&(i=m.length),m+l):m},""),r=pe(a,s,"",n);return{value:he(s+r,a)?s+r:s,selection:[null!=t?t:s.length,null!=i?i:s.length]}}(o,a,n):function He({value:o,selection:a},n){const[t,i]=a;let s=t,r=i;return{value:Array.from(o).reduce((l,u,d)=>{const m=l+u;return t===d&&(s=l.length),i===d&&(r=l.length),m.match(n)?m:l},""),selection:[s,r]}}(o,a);return{selection:i,value:Array.isArray(a)?t.slice(0,a.length):t}}function fe(o,a){if(!Array.isArray(a))return o;const[n,t]=o.selection,i=[],s=Array.from(o.value).reduce((r,c,l)=>{const u=a[l];return l===n&&i.push(r.length),l===t&&i.push(r.length),z(u)&&u===c?r:r+c},"");return i.length<2&&i.push(...new Array(2-i.length).fill(s.length)),{value:s,selection:[i[0],i[1]]}}class te{constructor(a,n){this.initialElementState=a,this.maskOptions=n,this.value="",this.selection=[0,0];const{value:t,selection:i}=V(a,this.getMaskExpression(a));this.value=t,this.selection=i}addCharacters([a,n],t){const{value:i}=this,s=this.getMaskExpression({value:i.slice(0,a)+t+i.slice(n),selection:[a+t.length,a+t.length]}),r={value:i,selection:[a,n]},c=fe(r,s),[l,u]=function ze({value:o,selection:a},n,t){const[i,s]=a;return{value:o,selection:"replace"===("function"==typeof t?t({value:o,selection:a}):t)?[i,i+n.length]:[i,s]}}(c,t,this.maskOptions.overwriteMode).selection,d=c.value.slice(0,l)+t,m=d.length,p=V({value:d+c.value.slice(u),selection:[m,m]},s,r);if(i.slice(0,l)===V({value:d,selection:[m,m]},s,r).value||function Le(o,...a){return a.every(({value:n,selection:t})=>n===o.value&&t[0]===o.selection[0]&&t[1]===o.selection[1])}(this,p))throw new Error("Invalid mask value");this.value=p.value,this.selection=p.selection}deleteCharacters([a,n]){if(a===n||!n)return;const{value:t}=this,i=this.getMaskExpression({value:t.slice(0,a)+t.slice(n),selection:[a,a]}),s={value:t,selection:[a,n]},r=fe(s,i),[c,l]=r.selection,d=V({value:r.value.slice(0,c)+r.value.slice(l),selection:[c,c]},i,s);this.value=d.value,this.selection=d.selection}getMaskExpression(a){const{mask:n}=this.maskOptions;return"function"==typeof n?n(a):n}}class je{constructor(a){this.element=a,this.listeners=[]}listen(a,n,t){const i=n;this.element.addEventListener(a,i,t),this.listeners.push(()=>this.element.removeEventListener(a,i))}destroy(){this.listeners.forEach(a=>a())}}function F(o,a,n){return o.ctrlKey===!!(1&a)&&o.altKey===!!(2&a)&&o.shiftKey===!!(4&a)&&o.metaKey===!!(8&a)&&o.keyCode===n}function Ke({value:o,selection:a},n){const[t,i]=a;if(t!==i)return[t,i];const s=n?o.slice(t).indexOf("\n")+1||o.length:o.slice(0,i).lastIndexOf("\n")+1;return[n?t:s,n?s:i]}function ge({value:o,selection:a},n){const[t,i]=a;return t!==i?[t,i]:(n?[t,i+1]:[t-1,i]).map(r=>Math.min(Math.max(r,0),o.length))}const _e=/\s+$/g,ve=/^\s+/g,xe=/\s/;function We({value:o,selection:a},n){const[t,i]=a;if(t!==i)return[t,i];if(n){const l=o.slice(t),[u]=l.match(ve)||[""],d=l.replace(ve,"").search(xe);return[t,-1!==d?t+u.length+d:o.length]}const s=o.slice(0,i),[r]=s.match(_e)||[""],c=s.replace(_e,"").split("").reverse().findIndex(l=>l.match(xe));return[-1!==c?i-r.length-c:0,i]}function H(o=[]){return(a,...n)=>o.reduce((t,i)=>Object.assign(Object.assign({},t),i(t,...n)),a)}function ne(o,a){const n=Object.assign(Object.assign({},L),a),t=H(n.preprocessors),i=H(n.postprocessors),s="string"==typeof o?{value:o,selection:[0,0]}:o,{elementState:r}=t({elementState:s,data:""},"validation"),c=new te(r,n),{value:l,selection:u}=i(c,s);return"string"==typeof o?l:{value:l,selection:u}}class Xe extends Ue{constructor(a,n){super(),this.element=a,this.maskitoOptions=n,this.isTextArea="TEXTAREA"===this.element.nodeName,this.eventListener=new je(this.element),this.options=Object.assign(Object.assign({},L),this.maskitoOptions),this.preprocessor=H(this.options.preprocessors),this.postprocessor=H(this.options.postprocessors),this.teardowns=this.options.plugins.map(t=>t(this.element,this.options)),this.ensureValueFitsMask(),this.updateHistory(this.elementState),this.eventListener.listen("keydown",t=>function Qe(o){return F(o,1,89)||F(o,5,90)||F(o,12,90)}(t)?(t.preventDefault(),this.redo()):function Ge(o){return F(o,1,90)||F(o,8,90)}(t)?(t.preventDefault(),this.undo()):void 0),function Ye(o){return"onbeforeinput"in o}(a)?this.eventListener.listen("beforeinput",t=>{const i=t.inputType.includes("Forward");switch(this.updateHistory(this.elementState),t.inputType){case"historyUndo":return t.preventDefault(),this.undo();case"historyRedo":return t.preventDefault(),this.redo();case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return this.handleDelete({event:t,isForward:i,selection:ge(this.elementState,i)});case"deleteWordForward":case"deleteWordBackward":return this.handleDelete({event:t,isForward:i,selection:We(this.elementState,i),force:!0});case"deleteSoftLineBackward":case"deleteSoftLineForward":case"deleteHardLineBackward":case"deleteHardLineForward":return this.handleDelete({event:t,isForward:i,selection:Ke(this.elementState,i),force:!0});case"insertCompositionText":return;case"insertLineBreak":return this.handleEnter(t);default:return this.handleInsert(t,t.data||"")}}):(this.eventListener.listen("keydown",t=>this.handleKeydown(t)),this.eventListener.listen("paste",t=>{var i;return this.handleInsert(t,(null===(i=t.clipboardData)||void 0===i?void 0:i.getData("text/plain"))||"")})),this.eventListener.listen("input",({inputType:t})=>{"insertCompositionText"!==t&&(this.ensureValueFitsMask(),this.updateHistory(this.elementState))}),this.eventListener.listen("compositionend",()=>{this.ensureValueFitsMask(),this.updateHistory(this.elementState)})}get elementState(){const{value:a,selectionStart:n,selectionEnd:t}=this.element;return{value:a,selection:[n||0,t||0]}}get maxLength(){const{maxLength:a}=this.element;return-1===a?1/0:a}destroy(){this.eventListener.destroy(),this.teardowns.forEach(a=>null==a?void 0:a())}updateElementState({value:a,selection:n},t={inputType:"insertText",data:null}){const i=this.elementState.value;this.updateValue(a),this.updateSelectionRange(n),i!==a&&this.dispatchInputEvent(t)}updateSelectionRange([a,n]){var t,i;(this.element.selectionStart!==a||this.element.selectionEnd!==n)&&(null===(i=(t=this.element).setSelectionRange)||void 0===i||i.call(t,a,n))}updateValue(a){this.element.value=a}ensureValueFitsMask(){this.updateElementState(ne(this.elementState,this.options))}dispatchInputEvent(a={inputType:"insertText",data:null}){const n=typeof window<"u"?window:globalThis;null!=n&&n.InputEvent&&this.element.dispatchEvent(new InputEvent("input",Object.assign(Object.assign({},a),{bubbles:!0,cancelable:!1})))}handleKeydown(a){const n=a.key,t="Delete"===n;switch(n){case"Backspace":case"Delete":return this.handleDelete({event:a,isForward:t,selection:ge(this.elementState,t)});case"Enter":return this.handleEnter(a)}(function Be({key:o,ctrlKey:a,metaKey:n,altKey:t}){const i=a||n||t,s=/^.$/u.test(o);return!i&&"Backspace"!==o&&s})(a)&&this.handleInsert(a,n)}handleDelete({event:a,selection:n,isForward:t,force:i=!1}){const s={value:this.elementState.value,selection:n},[r,c]=s.selection,{elementState:l}=this.preprocessor({elementState:s,data:""},t?"deleteForward":"deleteBackward"),u=new te(l,this.options),[d,m]=l.selection;u.deleteCharacters([d,m]);const p=this.postprocessor(u,s);if(s.value.slice(0,r)+s.value.slice(c)!==p.value||i)return a.preventDefault(),function Je(o,...a){return a.every(({value:n})=>n===o.value)}(s,l,u,p)?this.updateSelectionRange(t?[m,m]:[d,d]):(this.updateElementState(p,{inputType:"inputType"in a?a.inputType:t?"deleteContentForward":"deleteContentBackward",data:null}),void this.updateHistory(p))}handleInsert(a,n){const t=this.elementState,{elementState:i,data:s=n}=this.preprocessor({data:n,elementState:t},"insert"),r=new te(i,this.options);try{r.addCharacters(i.selection,s)}catch{return a.preventDefault()}const[c,l]=i.selection,u=i.value.slice(0,c)+n+i.value.slice(l),d=this.postprocessor(r,t);if(d.value.length>this.maxLength)return a.preventDefault();u!==d.value&&(a.preventDefault(),this.updateElementState(d,{data:n,inputType:"inputType"in a?a.inputType:"insertText"}),this.updateHistory(d))}handleEnter(a){this.isTextArea&&this.handleInsert(a,"\n")}}var et=x(7582);let tt=(()=>{class o{constructor(n,t){this.ngZone=n,this.elementRef=t,this.maskedElement=null,this.maskito=L,this.maskitoElement=qe}ngOnChanges(){var n;return(0,et.mG)(this,void 0,void 0,function*(){null===(n=this.maskedElement)||void 0===n||n.destroy();const t=this.maskitoElement,i=yield t(this.elementRef.nativeElement);this.maskitoElement===t&&this.ngZone.runOutsideAngular(()=>{this.maskedElement=new Xe(i,this.maskito)})})}ngOnDestroy(){var n;null===(n=this.maskedElement)||void 0===n||n.destroy()}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(e.R0b),e.Y36(e.SBq))},o.\u0275dir=e.lG2({type:o,selectors:[["","maskito",""]],inputs:{maskito:"maskito",maskitoElement:"maskitoElement"},features:[e.TTD]}),o})(),Me=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({}),o})();var oe=x(8180),nt=x(5592);const ot=[".",",","\u0431","\u044e"],j="\u2013",se="\u2014",$="-",Z="\u2212";const De=/[\\^$.*+?()[\]{}|]/g,rt=new RegExp(De.source);function M(o){return o&&rt.test(o)?o.replace(De,"\\$&"):o}function N(o){return o}function ut(o){const a=new RegExp(`${M(o)}$`);return o?({value:n,selection:t},i)=>{if(!n&&!i.value.endsWith(o))return{value:n,selection:t};if(!n.endsWith(o)&&!i.value.endsWith(o))return{selection:t,value:n+o};const s=i.value.replace(a,""),r=i.selection[1]>=s.length,c=function ct(o,a){let n="";for(let t=0;t<o.length;t++){if(o[t]!==a[t])return n;n+=o[t]}return n}(s,n);return{selection:t,value:Array.from(o).reverse().reduce((l,u,d)=>{const m=l.length-1-d;return l[m]!==u||c[m]===u&&r?l.slice(0,m+1)+u+l.slice(m+1):l},n)}}:N}function dt(o){return o?({value:a,selection:n},t)=>{if(a.startsWith(o)||!a&&!t.value.startsWith(o))return{value:a,selection:n};const[i,s]=n,r=Array.from(o).reduce((c,l,u)=>(c+a)[u]===l?c:c+l,"");return{selection:[i+r.length,s+r.length],value:r+a}}:N}function k(o,a,n){return(t,i)=>{const s=()=>a(t,i);return t.addEventListener(o,s,n),()=>t.removeEventListener(o,s,n)}}function Pe({decimalSeparator:o,isNegativeAllowed:a,precision:n,thousandSeparator:t,prefix:i,postfix:s,decimalPseudoSeparators:r=[],pseudoMinuses:c=[]}){const l=Fe(i),u="\\d",d=a?`[${Z}${c.map(g=>`\\${g}`).join("")}]?`:"",m=t?`[${u}${M(t)}]*`:`[${u}]*`,p=n>0?`([${M(o)}${r.map(M).join("")}]${u}{0,${Number.isFinite(n)?n:""}})?`:"",f=Fe(s);return new RegExp(`^${l}${d}${m}${p}${f}$`)}function Fe(o){return o?`${o.split("").map(a=>`${M(a)}?`).join("")}`:""}function le(o,a="."){const n=!!o.match(new RegExp(`^\\D*[${Z}\\${$}${j}${se}]`)),t=o.replace(new RegExp(`[^\\d${M(a)}]`,"g"),"").replace(a,".");return t?Number((n?$:"")+t):NaN}function Et({decimalSeparator:o,precision:a,decimalZeroPadding:n,postfix:t}){if(a<=0||!n)return N;const i=new RegExp(`${M(t)}$`);return({value:s,selection:r})=>{if(Number.isNaN(le(s)))return{value:s,selection:r};const[c,l=""]=s.replace(i,"").split(o);return{value:c+o+l.padEnd(a,"0")+t,selection:r}}}function bt({decimalSeparator:o,decimalPseudoSeparators:a,pseudoMinuses:n}){let t=!0;const i=Pe({decimalSeparator:o,decimalPseudoSeparators:a,pseudoMinuses:n,prefix:"",postfix:"",thousandSeparator:"",precision:1/0,isNegativeAllowed:!0});return({elementState:s,data:r})=>t?(t=!1,{elementState:ne(s,{mask:i}),data:r}):{elementState:s,data:r}}function Tt({min:o,max:a,decimalSeparator:n}){return({value:t,selection:i})=>{const s=le(t,n),r=s>0?Math.min(s,a):Math.max(s,o);if(!Number.isNaN(s)&&r!==s){const c=`${r}`.replace(".",n).replace($,Z);return{value:c,selection:[c.length,c.length]}}return{value:t,selection:i}}}function It({decimalSeparator:o,thousandSeparator:a,decimalZeroPadding:n}){return({elementState:t,data:i},s)=>{const{value:r,selection:c}=t,[l,u]=c,d=r.slice(l,u),m=n?[o,a]:[a],p=n&&l>r.indexOf(o)&&!!d.match(/^0+$/gi);return"deleteBackward"!==s&&"deleteForward"!==s||!m.includes(d)&&!p?{elementState:t,data:i}:{elementState:{value:r,selection:"deleteForward"===s?[u,u]:[l,l]},data:i}}}function Dt({decimalSeparator:o,precision:a}){const n=new RegExp(`^\\D*${M(o)}`);return({elementState:t,data:i})=>{const{value:s,selection:r}=t,[c]=r;return a<=0||s.includes(o)||!i.match(n)?{elementState:t,data:i}:{elementState:t,data:s.slice(0,c).match(/\d+/)?i:`0${i}`}}}function $e(o,a){const n=new RegExp(`[${a.join("")}]`,"gi");return({elementState:t,data:i})=>{const{value:s,selection:r}=t;return{elementState:{selection:r,value:s.replace(n,o)},data:i.replace(n,o)}}}function St(o){return({elementState:a,data:n})=>{const{value:t,selection:i}=a,[s,r]=i;return{elementState:a,data:!t.includes(o)||t.slice(s,r+1).includes(o)?n:n.replace(new RegExp(M(o),"gi"),"")}}}function wt({thousandSeparator:o,decimalSeparator:a,prefix:n,postfix:t}){if(!o)return N;const i=new RegExp(`^${M(n)}${Z}?`),s=new RegExp(`${M(t)}$`);return({value:r,selection:c})=>{const[l,u=""]=r.split(a),[d,m]=c;let[p,f]=c;const g=l.replace(i,"").replace(s,""),[_=""]=l.match(i)||[],[v=""]=l.match(s)||[];return{value:_+Array.from(g).reduceRight((A,T,D)=>{const J=!(!D&&T===o)&&A.length&&(A.length+1)%4==0;return T===o&&J?T+A:T!==o||J?J?(D<=d&&p++,D<=m&&f++,T+o+A):T+A:(D&&D<=d&&p--,D&&D<=m&&f--,A)},"")+v+(r.includes(a)?a:"")+u,selection:[p,f]}}}function yt(o,a){if(o>0)return N;const n=new RegExp(`${M(a)}.*$`,"g");return({elementState:t,data:i})=>{const{value:s,selection:r}=t,[c,l]=r,u=s.replace(n,"");return{elementState:{selection:[Math.min(c,u.length),Math.min(l,u.length)],value:u},data:i.replace(n,"")}}}new RegExp(`[${[":","."].map(M).join("")}]$`);const Re=[0,0];function Ot(o,a){const n=function At(o,a){const n=i=>{const s=M(a);return i.replace(new RegExp(`^(\\D+)?[0${s}]+(?=0)`),"$1").replace(new RegExp(`^(\\D+)?[0${s}]+(?=[1-9])`),"$1")},t=(i,s)=>{const r=i.slice(0,s),c=i.slice(s).startsWith("0");return r.length-n(r).length+(c?1:0)};return({value:i,selection:s})=>{const[r,c]=s,l=i.includes(o),[u,d=""]=i.split(o),m=n(u);if(u===m)return{value:i,selection:s};const p=r-t(i,r),f=c-t(i,c);return{value:m+(l?o:"")+d,selection:[Math.max(p,0),Math.max(f,0)]}}}(o,a);return k("blur",t=>{const i=n({value:t.value,selection:Re},{value:"",selection:Re}).value;t.value!==i&&(t.value=i,t.dispatchEvent(new Event("input")))},{capture:!0})}function kt({min:o,max:a,decimalSeparator:n}){return k("blur",(t,i)=>{const s=le(t.value,n),r=function y(o,a,n){const t=Math.min(Number(n),Math.max(Number(a),Number(o)));return o instanceof Date?new Date(t):t}(s,o,a);!Number.isNaN(s)&&s!==r&&(t.value=ne(function Mt(o){const a=String(o),[n,t]=a.split("e-");let i=a;if(t){const[,s]=n.split("."),r=Number(t)+((null==s?void 0:s.length)||0);i=o.toFixed(r)}return i}(r),i),t.dispatchEvent(new Event("input")))},{capture:!0})}function Zt(o){return k("blur",a=>{const n=a.value.replace(new RegExp(`^(\\D+)?${M(o)}`),`$10${o}`);n!==a.value&&(a.value=n,a.dispatchEvent(new Event("input")))},{capture:!0})}var Ft=x(3304),P=x.n(Ft),$t=x(3959);let Rt=(()=>{var o;class a{constructor(t){this.baseApiService=t,this.apiUrl="api/TipoManutencao"}getAll(){return this.baseApiService.get(`${this.apiUrl}/GetAll`)}}return(o=a).\u0275fac=function(t){return new(t||o)(e.LFG($t._))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),a})();var ue=x(1475);function qt(o,a){if(1&o&&(e.TgZ(0,"ion-select-option",9),e._uU(1),e.qZA()),2&o){const n=a.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(n.descricao)}}function Ut(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"ion-accordion")(1,"ion-item",4)(2,"ion-label"),e._uU(3,"Selecione um item:"),e.qZA()(),e.TgZ(4,"div",5)(5,"ion-row")(6,"ion-col",6)(7,"h2"),e._uU(8,"Classifica\xe7\xe3o da manuten\xe7\xe3o"),e.qZA(),e.TgZ(9,"ion-select",7),e.NdJ("ngModelChange",function(i){e.CHM(n);const s=e.oxw();return e.KtG(s.tipoManutencaoSelecionada=i)})("ionChange",function(i){e.CHM(n);const s=e.oxw();return e.KtG(s.handleChange(i))})("ngModelChange",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.filtrarDescExiste(i.tipoManutencaoSelecionada))}),e.YNc(10,qt,2,2,"ion-select-option",2),e.qZA()()(),e.TgZ(11,"ion-row")(12,"ion-col",6)(13,"h2"),e._uU(14,"Detalhamento"),e.qZA(),e.TgZ(15,"ion-textarea",8),e.NdJ("ngModelChange",function(i){e.CHM(n);const s=e.oxw();return e.KtG(s.obsManutencaoSelecionada=i)}),e.qZA()()()()()}if(2&o){const n=e.oxw();e.xp6(9),e.Q6J("multiple",!1)("ngModel",n.tipoManutencaoSelecionada),e.xp6(1),e.Q6J("ngForOf",n.opcoesTipoManutencao),e.xp6(5),e.Q6J("ngModel",n.obsManutencaoSelecionada)}}function Jt(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"ion-button",10),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.addItem())}),e._uU(1,"Adicionar Item"),e.qZA()}}function Lt(o,a){if(1&o&&(e.TgZ(0,"ion-select-option",9),e._uU(1),e.qZA()),2&o){const n=a.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(n.descricao)}}function zt(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-button",14),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.editItem(i))}),e._uU(3,"Editar item"),e.qZA()(),e.TgZ(4,"ion-col")(5,"ion-button",15),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.deleteItem(i))}),e._uU(6,"Deletar item"),e.qZA()()()}}function Vt(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"div",5)(1,"ion-row")(2,"ion-col",6)(3,"h2"),e._uU(4,"Classifica\xe7\xe3o da manuten\xe7\xe3o"),e.qZA(),e.TgZ(5,"ion-select",12),e.NdJ("ngModelChange",function(i){e.CHM(n);const s=e.oxw().$implicit;return e.KtG(s.tipoManutencao=i)})("ionChange",function(i){e.CHM(n);const s=e.oxw(2);return e.KtG(s.handleChange(i))}),e.YNc(6,Lt,2,2,"ion-select-option",2),e.qZA()()(),e.TgZ(7,"ion-row")(8,"ion-col",6)(9,"h2"),e._uU(10,"Detalhamento"),e.qZA(),e.TgZ(11,"ion-textarea",13),e.NdJ("ngModelChange",function(i){e.CHM(n);const s=e.oxw().$implicit;return e.KtG(s.observacao=i)}),e.qZA()()(),e.TgZ(12,"ion-grid"),e.YNc(13,zt,7,0,"ion-row",0),e.qZA()()}if(2&o){const n=e.oxw().$implicit,t=e.oxw();e.xp6(5),e.Q6J("multiple",!1)("ngModel",n.tipoManutencao)("disabled",!0),e.xp6(1),e.Q6J("ngForOf",t.opcoesTipoManutencao),e.xp6(5),e.Q6J("ngModel",n.observacao)("disabled",!t.chamadoEmAndamento),e.xp6(2),e.Q6J("ngIf",t.chamadoEmAndamento)}}function Ht(o,a){if(1&o&&(e.TgZ(0,"ion-accordion",9)(1,"ion-item",4)(2,"ion-label"),e._uU(3),e.qZA()(),e.YNc(4,Vt,14,7,"div",11),e.qZA()),2&o){const n=a.$implicit,t=e.oxw();e.Q6J("value",n.dateTimeInicio),e.xp6(3),e.Oqu(t.findTipoManutencao(n.tipoManutencao.id)),e.xp6(1),e.Q6J("ngIf",t.token.informarManutencao)}}const jt=function(){return["OK"]};let Qt=(()=>{var o;class a{constructor(t,i){this.tipoManuSrv=t,this.token=i,this.itens=[],this.opcoesTipoManutencao=[],this.tipoManutencaoSelecionada=null,this.obsManutencaoSelecionada="",this.timeInicial=P()().toISOString(),this.isAlertOpen=!1,this.pullArrayItens=new e.vpe,this.filtrarDescExiste=s=>"string"!=typeof s&&s?(this.isAlertOpen=!!this.itens.find(c=>{var l;return(null===(l=c.tipoManutencao)||void 0===l?void 0:l.id)===s.id}),!0===this.isAlertOpen):(this.isAlertOpen=!1,!1)}ngOnInit(){this.chamadoEmAndamento=this.status===I.h.EM_ANDAMENTO,this.tipoManuSrv.getAll().pipe((0,oe.q)(1)).subscribe(t=>{this.opcoesTipoManutencao=t}),this.enviarArrayItens(this.itens)}handleChange(t){this.tipoManutencaoSelecionada=t.detail.value}addItem(){if(!this.filtrarDescExiste(this.tipoManutencaoSelecionada)&&this.tipoManutencaoSelecionada){const t={dateTimeInicio:P()().toISOString(),dateTimeFim:P()().toISOString(),observacao:this.obsManutencaoSelecionada,tipoManutencao:this.tipoManutencaoSelecionada};this.itens.push(t),this.tipoManutencaoSelecionada=null,this.obsManutencaoSelecionada="",this.enviarArrayItens(this.itens)}}deleteItem(t){const i=this.itens.indexOf(t);-1!==i&&(this.itens.splice(i,1),this.enviarArrayItens(this.itens))}editItem(t){const i=this.itens.findIndex(s=>t.tipoManutencao);this.itens[i].observacao=t.observacao,this.enviarArrayItens(this.itens)}enviarArrayItens(t){this.pullArrayItens.emit(t)}findTipoManutencao(t){var i;const s=null!==(i=this.opcoesTipoManutencao.find(r=>r.id===t))&&void 0!==i?i:null;return null==s?void 0:s.descricao}}return(o=a).\u0275fac=function(t){return new(t||o)(e.Y36(Rt),e.Y36(ue.B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-item"]],inputs:{itens:"itens",status:"status"},outputs:{pullArrayItens:"pullArrayItens"},standalone:!0,features:[e.jDz],decls:5,vars:6,consts:[[4,"ngIf"],["expand","block",3,"click",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["header","Alerta","subHeader","Mensagem importante","message","Esse item j\xe1 foi adicionado. Caso queira editar a descri\xe7\xe3o do item, selecione o item abaixo",3,"isOpen","buttons","didDismiss"],["slot","header","color","light"],["slot","content",1,"ion-padding"],["size","12"],["placeholder","Selecione...","fill","outline",3,"multiple","ngModel","ngModelChange","ionChange"],["rows","4","placeholder","Descri\xe7\xe3o detalhada da classifica\xe7\xe3o da manuten\xe7\xe3o","fill","outline",3,"ngModel","ngModelChange"],[3,"value"],["expand","block",3,"click"],["class","ion-padding","slot","content",4,"ngIf"],["placeholder","Selecione...","fill","outline",3,"multiple","ngModel","disabled","ngModelChange","ionChange"],["rows","4","placeholder","Descri\xe7\xe3o detalhada da classifica\xe7\xe3o da manuten\xe7\xe3o","fill","outline",3,"ngModel","disabled","ngModelChange"],["expand","block","color","success",3,"click"],["expand","block","color","danger",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-accordion-group"),e.YNc(1,Ut,16,4,"ion-accordion",0),e.YNc(2,Jt,2,0,"ion-button",1),e.YNc(3,Ht,5,3,"ion-accordion",2),e.qZA(),e.TgZ(4,"ion-alert",3),e.NdJ("didDismiss",function(){return i.isAlertOpen=!1}),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",i.chamadoEmAndamento&&i.token.informarManutencao),e.xp6(1),e.Q6J("ngIf",i.tipoManutencaoSelecionada),e.xp6(1),e.Q6J("ngForOf",i.itens),e.xp6(1),e.Q6J("isOpen",i.isAlertOpen)("buttons",e.DdM(5,jt)))},dependencies:[w.ez,w.sg,w.O5,h.Pc,h.We,h.eh,h.Ge,h.YG,h.wI,h.jY,h.Ie,h.Q$,h.Nd,h.t9,h.n0,h.g2,h.QI,h.j9,E.u5,E.JJ,E.On,E.UX],styles:["[_nghost-%COMP%]   ion-accordion[_ngcontent-%COMP%]   .ion-padding[_ngcontent-%COMP%]{border:1px solid #acacac;border-radius:12px}[_nghost-%COMP%]   ion-select[_ngcontent-%COMP%]{min-height:42px;--padding-end: 8px;--padding-top: 8px;--padding-bottom: 8px;--padding-start: 8px;border:1px solid #4e5c5c;border-radius:10px}[_nghost-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--padding-end: 8px;--padding-top: 8px;--padding-bottom: 8px;--padding-start: 8px;border:1px solid #4e5c5c;border-radius:10px}"]}),a})();const Gt=function(){return[]};let Yt=(()=>{var o;class a{constructor(t,i){var s;this.formBuilder=t,this.token=i,this.getFormulario=new e.vpe,this.STATUSCHAMADO=I.h,this.phoneMask=function Nt({max:o=Number.MAX_SAFE_INTEGER,min:a=Number.MIN_SAFE_INTEGER,precision:n=0,thousandSeparator:t="\xa0",decimalSeparator:i=".",decimalPseudoSeparators:s,decimalZeroPadding:r=!1,prefix:c="",postfix:l=""}={}){const u=[$,j,se].filter(m=>m!==t&&m!==i),d=function Ct({decimalSeparator:o,thousandSeparator:a,decimalPseudoSeparators:n=ot}){return n.filter(t=>t!==a&&t!==o)}({decimalSeparator:i,thousandSeparator:t,decimalPseudoSeparators:s});return Object.assign(Object.assign({},L),{mask:Pe({decimalSeparator:i,precision:n,thousandSeparator:t,prefix:c,postfix:l,isNegativeAllowed:a<0}),preprocessors:[bt({decimalSeparator:i,decimalPseudoSeparators:d,pseudoMinuses:u}),$e(Z,u),$e(i,d),Dt({decimalSeparator:i,precision:n}),It({decimalSeparator:i,decimalZeroPadding:r,thousandSeparator:t}),yt(n,i),St(i)],postprocessors:[Tt({decimalSeparator:i,min:a,max:o}),dt(c),ut(l),wt({decimalSeparator:i,thousandSeparator:t,prefix:c,postfix:l}),Et({decimalSeparator:i,decimalZeroPadding:r,precision:n,postfix:l})],plugins:[Ot(i,t),Zt(i),kt({min:a,max:o,decimalSeparator:i})],overwriteMode:r?({value:m,selection:[p]})=>p<=m.indexOf(i)?"shift":"replace":"shift"})}({precision:2,decimalSeparator:",",min:0,prefix:"R$ ",thousandSeparator:"."}),this.maskPredicate=function(r){return(s=s||(0,b.Z)(function*(c){return c.getInputElement()})).apply(this,arguments)},this.formEditManutencao=this.formBuilder.group({itens:[null],detalhamento:[null,E.kI.required],custo:[null]}),this.formEditManutencao.valueChanges.subscribe(r=>{this.getFormulario.emit(r)})}ngOnInit(){this.dataManutencao&&this.formEditManutencao.patchValue({detalhamento:this.dataManutencao.detalhamento,custo:this.dataManutencao.custo}),this.statusChamado!=I.h.EM_ANDAMENTO&&this.desabilitarTodosCamposDoFormulario()}desabilitarTodosCamposDoFormulario(){const t=this.formEditManutencao.controls;for(const i in t)t.hasOwnProperty(i)&&t[i].disable()}getArrayItens(t){this.formEditManutencao.patchValue({itens:t})}}return(o=a).\u0275fac=function(t){return new(t||o)(e.Y36(E.qu),e.Y36(ue.B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-form-edit-manutencao"]],inputs:{statusChamado:"statusChamado",dataManutencao:"dataManutencao"},outputs:{getFormulario:"getFormulario"},standalone:!0,features:[e.jDz],decls:12,vars:9,consts:[[3,"formGroup"],[3,"itens","status","pullArrayItens"],["size","12"],["formControlName","detalhamento","rows","4","placeholder","Descri\xe7\xe3o detalhada da manuten\xe7\xe3o necess\xe1ria","fill","outline",3,"readonly"],["fill","outline","placeholder","R$ 0,00","formControlName","custo",3,"inputMode","maskito","maskitoElement","readonly"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"app-add-item",1),e.NdJ("pullArrayItens",function(r){return i.getArrayItens(r)}),e.qZA(),e.TgZ(2,"ion-row")(3,"ion-col",2)(4,"h2"),e._uU(5,"Detalhamento da manuten\xe7\xe3o"),e.qZA(),e._UZ(6,"ion-textarea",3),e.qZA()(),e.TgZ(7,"ion-row")(8,"ion-col",2)(9,"h2"),e._uU(10,"Valor"),e.qZA(),e._UZ(11,"ion-input",4),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.formEditManutencao),e.xp6(1),e.Q6J("itens",i.dataManutencao&&i.dataManutencao.itens?i.dataManutencao.itens:e.DdM(8,Gt))("status",i.statusChamado),e.xp6(5),e.Q6J("readonly",i.statusChamado===i.STATUSCHAMADO.VALIDACAO_PENDENTE),e.xp6(5),e.Q6J("inputMode","number")("maskito",i.phoneMask)("maskitoElement",i.maskPredicate)("readonly",i.statusChamado===i.STATUSCHAMADO.VALIDACAO_PENDENTE))},dependencies:[h.Pc,h.wI,h.pK,h.Nd,h.g2,h.j9,w.ez,E.u5,E._Y,E.JJ,E.JL,Me,tt,E.UX,E.sg,E.u,Qt],styles:["ion-input[_ngcontent-%COMP%]{min-height:42px;--padding-end: 8px;--padding-start: 8px;border:1px solid #4e5c5c;border-radius:10px}ion-textarea[_ngcontent-%COMP%]{--padding-end: 8px;--padding-top: 8px;--padding-bottom: 8px;--padding-start: 8px;border:1px solid #4e5c5c;border-radius:10px}"]}),a})();var X=x(5714),Bt=x(6418),Kt=x(8467),Wt=x(5089),Xt=x(5787);function en(o,a){if(1&o&&(e.TgZ(0,"ion-card-title"),e._uU(1),e.qZA()),2&o){const n=e.oxw(2);e.xp6(1),e.Oqu(n.chamado.detalhamento)}}function tn(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"ion-card-title")(1,"ion-input",18),e.NdJ("ngModelChange",function(i){e.CHM(n);const s=e.oxw(2);return e.KtG(s.chamado.detalhamento=i)}),e.qZA()()}if(2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngModel",n.chamado.detalhamento)}}function nn(o,a){if(1&o&&(e.TgZ(0,"ion-col",15)(1,"h2"),e._uU(2,"Prioridade"),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA()()),2&o){const n=e.oxw(2);e.xp6(4),e.hij(" ",n.info.getPrioridadeNome(n.chamado.prioridade)," ")}}function on(o,a){if(1&o&&(e.TgZ(0,"ion-select-option",21),e._uU(1),e.qZA()),2&o){const n=a.$implicit;e.Q6J("value",n.value),e.xp6(1),e.Oqu(n.label)}}function an(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"ion-col",15)(1,"h2"),e._uU(2,"Prioridade"),e.qZA(),e.TgZ(3,"ion-select",19),e.NdJ("ngModelChange",function(i){e.CHM(n);const s=e.oxw(2);return e.KtG(s.chamado.prioridade=i)}),e.YNc(4,on,2,2,"ion-select-option",20),e.qZA()()}if(2&o){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n.chamado.prioridade),e.xp6(1),e.Q6J("ngForOf",n.prioridadeChamadoOptions)}}function sn(o,a){if(1&o&&(e.TgZ(0,"ion-col",13)(1,"h2"),e._uU(2,"Data In\xedcio Manuten\xe7\xe3o"),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.ALo(5,"date"),e.qZA()()),2&o){const n=e.oxw(2);e.xp6(4),e.Oqu(e.xi3(5,1,n.timeInicioManutencao,"dd/MM/yyyy HH:MM"))}}function rn(o,a){if(1&o&&(e.TgZ(0,"ion-col",15)(1,"h2"),e._uU(2,"Data Fim Manuten\xe7\xe3o"),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.ALo(5,"date"),e.qZA()()),2&o){const n=e.oxw(2);e.xp6(4),e.Oqu(e.xi3(5,1,n.timeFimManutencao,"dd/MM/yyyy HH:MM"))}}const cn=function(o){return["/detail",o]};function ln(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"ion-col",13)(2,"ion-button",22),e._uU(3,"Chamado anterior vinculado"),e.qZA()(),e.BQk()),2&o){const n=e.oxw(2);e.xp6(2),e.Q6J("routerLink",e.VKq(1,cn,n.chamado.chamadoManutencaoOrigem.id))}}function un(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"ion-col",15)(2,"h2")(3,"strong"),e._uU(4,"Validador"),e.qZA()(),e.TgZ(5,"p"),e._uU(6),e.qZA()(),e.BQk()),2&o){const n=e.oxw(2);e.xp6(6),e.Oqu(n.funcionarioValidadorNome)}}function dn(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"app-form-edit-manutencao",23),e.NdJ("getFormulario",function(i){e.CHM(n);const s=e.oxw(2);return e.KtG(s.getFormManutencao(i))}),e.qZA()}if(2&o){const n=e.oxw(2);e.Q6J("statusChamado",n.chamado.status)("dataManutencao",n.dataManutencao)}}function mn(o,a){if(1&o&&(e.TgZ(0,"ion-card")(1,"ion-toolbar",11)(2,"ion-title"),e._uU(3),e.qZA()(),e.TgZ(4,"ion-card-header"),e.YNc(5,en,2,1,"ion-card-title",7),e.YNc(6,tn,2,1,"ion-card-title",7),e.TgZ(7,"ion-card-subtitle"),e._uU(8),e.qZA(),e.TgZ(9,"ion-card-subtitle"),e._uU(10),e.qZA()(),e.TgZ(11,"ion-card-content",12)(12,"ion-grid",12)(13,"ion-row")(14,"ion-col",13)(15,"h2"),e._uU(16,"Status"),e.qZA(),e.TgZ(17,"p"),e._uU(18),e.qZA()(),e.YNc(19,nn,5,1,"ion-col",14),e.YNc(20,an,5,2,"ion-col",14),e.qZA(),e.TgZ(21,"ion-row")(22,"ion-col",13)(23,"h2"),e._uU(24,"Solicitante"),e.qZA(),e.TgZ(25,"p"),e._uU(26),e.qZA()(),e.TgZ(27,"ion-col",15)(28,"h2"),e._uU(29,"Data de Abertura"),e.qZA(),e.TgZ(30,"p"),e._uU(31),e.ALo(32,"date"),e.qZA()()(),e.TgZ(33,"ion-row"),e.YNc(34,sn,6,4,"ion-col",16),e.YNc(35,rn,6,4,"ion-col",14),e.qZA(),e.TgZ(36,"ion-row"),e.YNc(37,ln,4,3,"ng-container",7),e.YNc(38,un,7,1,"ng-container",7),e.qZA(),e.YNc(39,dn,1,2,"app-form-edit-manutencao",17),e.qZA()()()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("color",n.info.getStatusCor(n.chamado.status)),e.xp6(2),e.Oqu(n.info.getStatusNome(n.chamado.status)),e.xp6(2),e.Q6J("ngIf",!n.chamadoPendente),e.xp6(1),e.Q6J("ngIf",n.chamadoPendente),e.xp6(2),e.hij("Setor: ",n.setorNomeChamado,""),e.xp6(2),e.hij("Descri\xe7\xe3o: ",n.nomeImobilizado,""),e.xp6(8),e.Oqu(n.info.getStatusNome(n.chamado.status)),e.xp6(1),e.Q6J("ngIf",!n.chamadoPendente),e.xp6(1),e.Q6J("ngIf",n.chamadoPendente),e.xp6(6),e.Oqu(n.funcionarioNomeChamado),e.xp6(5),e.Oqu(e.xi3(32,16,n.convertHourUtc(n.chamado.dateTime),"dd/MM/yyyy HH:MM")),e.xp6(3),e.Q6J("ngIf",!n.chamadoPendente),e.xp6(1),e.Q6J("ngIf",!n.chamadoPendente&&!n.chamadoEmAndamento),e.xp6(2),e.Q6J("ngIf",n.chamado.chamadoManutencaoOrigem),e.xp6(1),e.Q6J("ngIf",n.chamado.validador),e.xp6(1),e.Q6J("ngIf",!n.chamadoPendente&&n.dataManutencao)}}function pn(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-button",24),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.confirmarIniciarManutencao())}),e._uU(3,"Iniciar"),e.qZA()()()}2&o&&(e.xp6(2),e.Q6J("expand","block")("color","primary"))}function hn(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-button",25),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.confirmarFinalizarManutencao())}),e._uU(3,"Finalizar Manuten\xe7\xe3o"),e.qZA()(),e.TgZ(4,"ion-col")(5,"ion-button",24),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.confirmarSalvarManutencao())}),e._uU(6,"Salvar"),e.qZA()()()}if(2&o){const n=e.oxw();e.xp6(2),e.Q6J("expand","block")("color","success")("disabled",!(null!=n.formManutencao&&n.formManutencao.detalhamento)),e.xp6(3),e.Q6J("expand","block")("color","primary")}}function fn(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"ion-col")(1,"ion-button",24),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.confirmarEditarChamado())}),e._uU(2,"Editar Chamado"),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("expand","block")("color","success"))}function gn(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"ion-col")(1,"ion-button",24),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.confirmarCancelarChamado())}),e._uU(2,"Cancelar Chamado"),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("expand","block")("color","danger"))}function _n(o,a){if(1&o&&(e.TgZ(0,"ion-row"),e.YNc(1,fn,3,2,"ion-col",7),e.YNc(2,gn,3,2,"ion-col",7),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.chamadoPendente&&n.tokenSrv.informarChamado),e.xp6(1),e.Q6J("ngIf",n.chamadoPendente&&n.tokenSrv.informarChamado||n.chamadoEmAndamento&&n.tokenSrv.informarManutencao)}}function vn(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-button",24),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.confirmarFinalizarChamado())}),e._uU(3,"Validar"),e.qZA()(),e.TgZ(4,"ion-col")(5,"ion-button",24),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.confirmarDevolverChamado())}),e._uU(6,"Devolver"),e.qZA()()()}2&o&&(e.xp6(2),e.Q6J("expand","block")("color","success"),e.xp6(3),e.Q6J("expand","block")("color","danger"))}function xn(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",2)(3,"ion-button",26),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.obsEspecial.botaoCancelar())}),e._uU(4,"Voltar"),e.qZA()(),e.TgZ(5,"ion-buttons",27)(6,"ion-button",28),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.obsEspecial.botaoConfirmar())}),e._uU(7,"Confirmar"),e.qZA()()()(),e.TgZ(8,"ion-content",29)(9,"ion-item")(10,"ion-row")(11,"ion-col",30)(12,"h2"),e._uU(13),e.qZA(),e.ynx(14),e.TgZ(15,"p"),e._uU(16),e.ALo(17,"uppercase"),e.qZA(),e.TgZ(18,"p"),e._uU(19),e.ALo(20,"uppercase"),e.qZA(),e.BQk(),e.TgZ(21,"ion-textarea",31),e.NdJ("ngModelChange",function(i){e.CHM(n);const s=e.oxw();return e.KtG(s.obsEspecialChamado=i)}),e.qZA()()()()()}if(2&o){const n=e.oxw();e.xp6(6),e.Q6J("disabled",!n.obsEspecialChamado)("strong",!0),e.xp6(7),e.Oqu(n.obsEspecial.subtitle),e.xp6(3),e.hij("SETOR: ",e.lcZ(17,7,n.obsEspecial.setor),""),e.xp6(3),e.hij("DESCRI\xc7\xc3O: ",e.lcZ(20,9,n.obsEspecial.imobilizado),""),e.xp6(2),e.Q6J("placeholder",n.obsEspecial.placeholder)("ngModel",n.obsEspecialChamado)}}let Mn=(()=>{var o;class a{constructor(t,i,s,r,c,l,u){this.manutencaoSrv=t,this.info=i,this.alertCtrl=s,this.route=r,this.router=c,this.tokenSrv=l,this.getImobilizado=u,this.StatusChamado=I.h,this.PrioridadeChamado=ee.t,this.modalObs=!1,this.prioridadeChamadoOptions=this.enumToArray(ee.t),this.convertHourUtc=Bt.k}ngOnInit(){this.route.params.subscribe(t=>{this.id=Number(t.id),this.id&&this.getChamadoRequest()})}getChamadoRequest(){var i,t=this;this.manutencaoSrv.getAll().pipe((0,oe.q)(1)).subscribe(function(s){return(i=i||(0,b.Z)(function*(r){var c,l,u;const d=r.filter(m=>m.id===t.id);t.chamado=d[0],console.log(t.chamado),t.nomeImobilizado=(yield t.buscarImobilizadoAtualizado()).descricao,t.chamadoEmAndamento=t.chamado.status===I.h.EM_ANDAMENTO,t.chamadoPendente=t.chamado.status===I.h.PENDENTE,t.chamadoCancelado=t.chamado.status===I.h.CANCELADO,t.chamadoValidacaoPendente=t.chamado.status===I.h.VALIDACAO_PENDENTE,t.getSetorNomeSubscription=t.info.getSetorNome(null===(c=t.chamado.setor)||void 0===c?void 0:c.id).subscribe(m=>t.setorNomeChamado=m),t.getSetorFuncionarioSubscription=t.info.getFuncionarioNome(null===(l=t.chamado.funcionario)||void 0===l?void 0:l.id).subscribe(m=>t.funcionarioNomeChamado=m),t.getValidadorSubscription=t.info.getFuncionarioNome(null===(u=t.chamado.validador)||void 0===u?void 0:u.id).subscribe(m=>t.funcionarioValidadorNome=m),t.chamadoPendente||t.manutencaoSrv.get(t.id).subscribe(m=>{t.dataManutencao=m,t.timeInicioManutencao=t.dataManutencao.dateTimeInicio,t.timeFimManutencao=t.dataManutencao.dateTimeFim})})).apply(this,arguments)})}editarChamado(){this.manutencaoSrv.saveChamado({...this.chamado,dateTimeInicio:void 0}).pipe((0,oe.q)(1)).subscribe({next:()=>{this.router.navigate(["/list"])},error:t=>this.errorMessage(t)})}salvarManutencao(t){var i,s,r;const c=this.tokenSrv.funcionarioId,l=P()().toISOString(),u=null===(i=this.formManutencao)||void 0===i?void 0:i.detalhamento,d=null===(s=this.formManutencao)||void 0===s?void 0:s.custo,m=null===(r=this.formManutencao)||void 0===r||null===(r=r.itens)||void 0===r?void 0:r.map(_=>({..._,id:void 0})),p={id:this.chamado.id,dateTimeInicio:l,funcionario:{id:c}},f={...this.dataManutencao,funcionario:{id:c},detalhamento:u,custo:d,itens:m,dateTimeFim:t?P()().toISOString():void 0},g=this.chamadoPendente?p:f;return new nt.y(_=>{this.manutencaoSrv.saveManutencao(g).subscribe({next:v=>{this.getChamadoRequest(),_.next(!0),_.complete()},error:v=>{this.errorMessage(v),_.next(!1),_.complete()}})})}cancelarChamado(){var t=this;return(0,b.Z)(function*(){return t.manutencaoSrv.cancelamentoChamado(t.id,t.obsEspecialChamado).subscribe({next:()=>{t.modalObs=!1,t.getChamadoRequest()},error:i=>t.errorMessage(i)})})()}finalizarManutencao(){return this.salvarManutencao(!0).subscribe({next:t=>{if(t)return this.manutencaoSrv.finalizarManutencao(this.id).subscribe({next:()=>{this.getChamadoRequest(),this.router.navigate(["/home"])},error:i=>this.errorMessage(i)});throw new Error("N\xe3o foi possivel salvar o chamado para finaliza-lo.")}})}finalizarChamado(t){var i=this;return(0,b.Z)(function*(){var s;const r={id:i.id,funcionarioId:i.tokenSrv.funcionarioId,setorId:null===(s=t.setor)||void 0===s?void 0:s.id,obs:i.obsEspecialChamado};i.manutencaoSrv.saveChamado({...i.chamado,status:I.h.VALIDACAO_CONFIRMADA}).subscribe({next:()=>{i.manutencaoSrv.finalizarChamado(r).subscribe(()=>{i.modalObs=!1,setTimeout(()=>{i.router.navigate(["/list/check"])},1e3)})},error:c=>i.errorMessage(c)})})()}devolverChamado(t){var i=this;return(0,b.Z)(function*(){var s;const r={dateTime:P()().toISOString(),detalhamento:i.obsEspecialChamado,funcionario:{id:i.tokenSrv.funcionarioId},imobilizado:{id:t.id},prioridade:ee.t.ALTA,setor:{id:Number(null===(s=t.setor)||void 0===s?void 0:s.id)},status:I.h.PENDENTE,chamadoManutencaoOrigem:i.dataManutencao};return i.manutencaoSrv.saveChamado({...i.chamado,status:I.h.DEVOLVIDO}).subscribe(()=>{i.manutencaoSrv.saveChamado(r).subscribe({next:()=>{i.modalObs=!1,setTimeout(()=>{i.router.navigate(["/"])},1e3)},error:c=>i.errorMessage(c)})})})()}confirmarFinalizarManutencao(){var t=this;return(0,b.Z)(function*(){yield(yield t.alertCtrl.create({header:"Finalizar manuten\xe7\xe3o",message:"Voc\xea tem certeza que quer finalizar essa manuten\xe7\xe3o?",buttons:[{text:"Voltar",role:"cancel"},{text:"Finalizar",role:"",handler:()=>t.finalizarManutencao()}]})).present()})()}confirmarSalvarManutencao(){var t=this;return(0,b.Z)(function*(){yield(yield t.alertCtrl.create({header:"Salvar manuten\xe7\xe3o",message:"Voc\xea tem certeza que quer salvar essa manuten\xe7\xe3o?",buttons:[{text:"Voltar",role:"cancel"},{text:"Salvar",role:"",handler:()=>t.salvarManutencao().subscribe()}]})).present()})()}confirmarIniciarManutencao(){var t=this;return(0,b.Z)(function*(){yield(yield t.alertCtrl.create({header:"Iniciar manuten\xe7\xe3o",message:"Voc\xea tem certeza que quer iniciar essa manuten\xe7\xe3o?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Iniciar",role:"",handler:()=>t.salvarManutencao().subscribe()}]})).present()})()}confirmarCancelarChamado(){var t=this;return(0,b.Z)(function*(){yield(yield t.alertCtrl.create({header:"Cancelar chamado",message:"Voc\xea tem certeza que quer cancelar esse chamado?",buttons:[{text:"Voltar",role:"cancel",handler:()=>t.modalObs=!1},{text:"Continuar",role:"destroy",handler:()=>{t.obsEspecial={subtitle:"Motivo do cancelamento",placeholder:"Descreva o motivo do cancelamento do chamado",botaoCancelar:()=>t.clearObsEspecial(),botaoConfirmar:()=>t.cancelarChamado()},t.modalObs=!0}}]})).present()})()}confirmarFinalizarChamado(){var t=this;return(0,b.Z)(function*(){var i;yield(yield t.alertCtrl.create({header:"Finalizar chamado",message:"Voc\xea tem certeza que quer finalizar esse chamado?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Finalizar",role:"success",handler:function(){return(i=i||(0,b.Z)(function*(){var c;const l=yield t.buscarImobilizadoAtualizado();t.obsEspecial={subtitle:"Finalizar chamado",setor:null===(c=l.setor)||void 0===c?void 0:c.name,imobilizado:l.descricao,placeholder:"Observa\xe7\xf5es",botaoCancelar:()=>t.clearObsEspecial(),botaoConfirmar:()=>t.finalizarChamado(l)},t.modalObs=!0})).apply(this,arguments)}}]})).present()})()}confirmarDevolverChamado(){var t=this;return(0,b.Z)(function*(){var i;yield(yield t.alertCtrl.create({header:"Devolver chamado",message:"Voc\xea tem certeza que quer devolver esse chamado?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Devolver",role:"destroy",handler:function(){return(i=i||(0,b.Z)(function*(){var c;const l=yield t.buscarImobilizadoAtualizado();t.obsEspecial={subtitle:"Devolver chamado",setor:null===(c=l.setor)||void 0===c?void 0:c.name,imobilizado:l.descricao,placeholder:"Detalhe o porque est\xe1 devolvendo o chamado",botaoCancelar:()=>t.clearObsEspecial(),botaoConfirmar:()=>t.devolverChamado(l)},t.modalObs=!0})).apply(this,arguments)}}]})).present()})()}confirmarEditarChamado(){var t=this;return(0,b.Z)(function*(){yield(yield t.alertCtrl.create({header:"Editar manuten\xe7\xe3o",message:"Voc\xea tem certeza que quer editar esse chamado?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Editar",role:"",handler:()=>t.editarChamado()}]})).present()})()}ngOnDestroy(){this.getSetorNomeSubscription.unsubscribe(),this.getSetorFuncionarioSubscription.unsubscribe()}clearObsEspecial(){this.modalObs=!1,this.obsEspecialChamado="",this.obsEspecial={title:"",setor:"",imobilizado:"",subtitle:"",placeholder:"",botaoCancelar:null,botaoConfirmar:null}}getFormManutencao(t){this.formManutencao=t,t.custo&&(this.formManutencao.custo=Number(t.custo.toString().replace("R$ ","").split(".").join("").replace(",",".")))}errorMessage(t){var i=this;return(0,b.Z)(function*(){yield(yield i.alertCtrl.create({header:"Erro!",message:t.message?null==t?void 0:t.message:"Erro desconhecido, tente novamente",buttons:["Ok"]})).present()})()}enumToArray(t){const i=[];for(const s in t)"number"==typeof t[s]&&i.push({label:s,value:t[s]});return i}buscarImobilizadoAtualizado(){var t=this;return(0,b.Z)(function*(){var i;const s=yield t.getImobilizado.get(null===(i=t.chamado.imobilizado)||void 0===i?void 0:i.id);if(!s)throw new Error;return s})()}}return(o=a).\u0275fac=function(t){return new(t||o)(e.Y36(Kt.H),e.Y36(Wt.I),e.Y36(h.Br),e.Y36(X.gz),e.Y36(X.F0),e.Y36(ue.B),e.Y36(Xt.U))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-detail-info"]],inputs:{id:"id"},standalone:!0,features:[e.jDz],decls:22,vars:10,consts:[[1,"ion-page"],[3,"translucent"],["slot","start"],["color","primary","defaultHref","/list","text",""],[3,"fullscreen"],["collapse","condense"],["size","large"],[4,"ngIf"],[1,"ion-no-border"],[1,"ion-no-margin","ion-no-padding"],[3,"isOpen"],[3,"color"],[1,""],["size","7"],["size","5",4,"ngIf"],["size","5"],["size","7",4,"ngIf"],[3,"statusChamado","dataManutencao","getFormulario",4,"ngIf"],[3,"ngModel","ngModelChange"],["placeholder","Editar prioridade",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["color","tertiary",3,"routerLink"],[3,"statusChamado","dataManutencao","getFormulario"],["size","large",3,"expand","color","click"],["size","large",3,"expand","color","disabled","click"],[3,"click"],["slot","end"],[3,"disabled","strong","click"],[1,"ion-padding"],["size","12"],["rows","3","fill","outline",3,"placeholder","ngModel","ngModelChange"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"ion-header",1)(2,"ion-toolbar")(3,"ion-buttons",2),e._UZ(4,"ion-back-button",3),e.qZA(),e.TgZ(5,"ion-title"),e._uU(6),e.qZA()()(),e.TgZ(7,"ion-content",4)(8,"ion-header",5)(9,"ion-toolbar")(10,"ion-title",6),e._uU(11),e.qZA()()(),e.YNc(12,mn,40,19,"ion-card",7),e.qZA(),e.TgZ(13,"ion-footer",8)(14,"ion-toolbar",9)(15,"ion-grid"),e.YNc(16,pn,4,2,"ion-row",7),e.YNc(17,hn,7,5,"ion-row",7),e.YNc(18,_n,3,2,"ion-row",7),e.YNc(19,vn,7,4,"ion-row",7),e.qZA()()()(),e.TgZ(20,"ion-modal",10),e.YNc(21,xn,22,11,"ng-template"),e.qZA()),2&t&&(e.xp6(1),e.Q6J("translucent",!0),e.xp6(5),e.hij("#",i.id,""),e.xp6(1),e.Q6J("fullscreen",!0),e.xp6(4),e.hij("#",i.id,""),e.xp6(1),e.Q6J("ngIf",i.chamado),e.xp6(4),e.Q6J("ngIf",i.chamadoPendente&&i.tokenSrv.informarManutencao),e.xp6(1),e.Q6J("ngIf",i.chamadoEmAndamento&&i.tokenSrv.informarManutencao),e.xp6(1),e.Q6J("ngIf",i.chamadoPendente||i.chamadoEmAndamento),e.xp6(1),e.Q6J("ngIf",i.chamadoValidacaoPendente&&i.tokenSrv.validarManutencao),e.xp6(1),e.Q6J("isOpen",i.modalObs))},dependencies:[h.Pc,h.oU,h.YG,h.Sm,h.PM,h.FN,h.Zi,h.tO,h.Dq,h.wI,h.W2,h.fr,h.jY,h.Gu,h.pK,h.Ie,h.Nd,h.t9,h.n0,h.g2,h.wd,h.sr,h.ki,h.QI,h.j9,h.cs,h.YI,w.ez,w.sg,w.O5,w.gd,w.uU,E.u5,E.JJ,E.On,X.Bz,X.rH,E.UX,Me,Yt],styles:["[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]{display:block;max-width:800px;margin:16px auto}[_nghost-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:0 8px 16px}[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:500;color:#333;font-size:14px}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}[_nghost-%COMP%]   ion-input[_ngcontent-%COMP%]{min-height:42px;--padding-end: 8px;--padding-start: 8px}[_nghost-%COMP%]   ion-select[_ngcontent-%COMP%]{min-height:42px;--padding-end: 8px;--padding-top: 8px;--padding-bottom: 8px;--padding-start: 8px}[_nghost-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--padding-end: 8px;--padding-top: 8px;--padding-bottom: 8px;--padding-start: 8px}[_nghost-%COMP%]   ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{display:block;max-width:800px;margin:0 auto}"]}),a})()}}]);