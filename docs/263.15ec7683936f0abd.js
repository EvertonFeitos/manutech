"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[263],{3913:(O,h,n)=>{n.d(h,{t:()=>l});var l=function(r){return r[r.BAIXA=0]="BAIXA",r[r.MEDIA=1]="MEDIA",r[r.ALTA=2]="ALTA",r[r.URGENTE=3]="URGENTE",r}(l||{})},1230:(O,h,n)=>{n.d(h,{h:()=>l});var l=function(r){return r[r.PENDENTE=0]="PENDENTE",r[r.EM_ANDAMENTO=1]="EM_ANDAMENTO",r[r.DEVOLVIDO=2]="DEVOLVIDO",r[r.CANCELADO=3]="CANCELADO",r[r.VALIDACAO_PENDENTE=4]="VALIDACAO_PENDENTE",r[r.VALIDACAO_CONFIRMADA=5]="VALIDACAO_CONFIRMADA",r}(l||{})},263:(O,h,n)=>{n.r(h),n.d(h,{FormPage:()=>B});var l=n(5861),r=n(6814),c=n(95),s=n(5714),o=n(9843),v=n(7487),_=n(3913),t=n(1230),e=n(9468),g=n(5089),p=n(1475),M=n(5787),C=n(8467);const A=["action"];function d(E,T){if(1&E){const m=e.EpF();e.TgZ(0,"ion-buttons",13)(1,"ion-button",14),e.NdJ("click",function(){e.CHM(m);const a=e.oxw();return e.KtG(a.closeCamera())}),e._uU(2," Fechar "),e.qZA()()}}function I(E,T){1&E&&(e.TgZ(0,"p",15),e._uU(1,"\u231b Carregando..."),e.qZA())}function x(E,T){if(1&E){const m=e.EpF();e.ynx(0),e.TgZ(1,"p"),e._uU(2,"Para iniciar um chamado, clique no bot\xe3o da camera."),e.qZA(),e.TgZ(3,"ion-button",16),e.NdJ("click",function(){e.CHM(m);const a=e.oxw(),u=e.MAs(12);return e.KtG(a.handle(u,"start"))}),e._UZ(4,"ion-icon",17),e.qZA(),e.TgZ(5,"ion-row")(6,"ion-col",18)(7,"p"),e._uU(8,"Ou busque pelo c\xf3digo do imobilizado:"),e.qZA(),e.TgZ(9,"ion-input",19),e.NdJ("ngModelChange",function(a){e.CHM(m);const u=e.oxw();return e.KtG(u.buscarCodImobilizado=a)}),e.qZA()()(),e.TgZ(10,"ion-button",20),e.NdJ("click",function(){e.CHM(m);const a=e.oxw();return e.KtG(a.buscarPorCodigo())}),e._uU(11,"Buscar "),e._UZ(12,"ion-icon",21),e.qZA(),e.BQk()}if(2&E){const m=e.oxw();e.xp6(9),e.Q6J("inputMode","number")("ngModel",m.buscarCodImobilizado),e.xp6(1),e.Q6J("disabled",!m.buscarCodImobilizado)}}const L=function(){return["/home"]};function U(E,T){if(1&E){const m=e.EpF();e.ynx(0),e.TgZ(1,"form",22)(2,"h2"),e._uU(3),e.qZA(),e.TgZ(4,"ion-item-divider"),e._uU(5,"Setor"),e.qZA(),e.TgZ(6,"ion-item",23),e._UZ(7,"ion-input",24),e.qZA(),e.TgZ(8,"ion-radio-group",25)(9,"ion-list",26)(10,"ion-item-divider"),e._uU(11,"Prioridade"),e.qZA(),e.TgZ(12,"ion-item",23)(13,"ion-radio",27),e._uU(14,"Prioridade Baixa"),e.qZA()(),e.TgZ(15,"ion-item",23)(16,"ion-radio",27),e._uU(17,"Prioridade m\xe9dia"),e.qZA()(),e.TgZ(18,"ion-item",23)(19,"ion-radio",27),e._uU(20,"Prioridade alta"),e.qZA()(),e.TgZ(21,"ion-item",23)(22,"ion-radio",27),e._uU(23,"Urgente"),e.qZA()()()(),e.TgZ(24,"ion-item-divider"),e._uU(25,"Detalhamento"),e.qZA(),e.TgZ(26,"ion-item",23),e._UZ(27,"ion-textarea",28),e.qZA(),e.TgZ(28,"ion-grid")(29,"ion-row")(30,"ion-col",29)(31,"ion-button",30),e._uU(32,"Descartar "),e._UZ(33,"ion-icon",31),e.qZA()(),e.TgZ(34,"ion-col",29)(35,"ion-button",32),e.NdJ("click",function(){e.CHM(m);const a=e.oxw();return e.KtG(a.confirm())}),e._uU(36,"Confirma "),e._UZ(37,"ion-icon",21),e.qZA()()()()(),e.BQk()}if(2&E){const m=e.oxw();e.xp6(1),e.Q6J("formGroup",m.novaManutencaoForm),e.xp6(2),e.Oqu(m.nomeImobilizado),e.xp6(4),e.Q6J("value",m.setorNome),e.xp6(6),e.Q6J("value",m.PrioridadeChamado.BAIXA),e.xp6(3),e.Q6J("value",m.PrioridadeChamado.MEDIA),e.xp6(3),e.Q6J("value",m.PrioridadeChamado.ALTA),e.xp6(3),e.Q6J("value",m.PrioridadeChamado.URGENTE),e.xp6(5),e.Q6J("rows",5),e.xp6(4),e.Q6J("routerLink",e.DdM(9,L))}}function S(E,T){1&E&&(e.TgZ(0,"ion-footer")(1,"ion-toolbar")(2,"ion-buttons",33),e._UZ(3,"ion-back-button",34),e.qZA()()())}let B=(()=>{var E;class T{constructor(i,a,u,f,P,D,b,y){this.chamados=i,this.navCtrl=a,this.tokenSrv=u,this.alertSrv=f,this.formBuilder=P,this.getImobilizado=D,this.manutencaoSrv=b,this.router=y,this.config={constraints:{video:{width:window.innerWidth}}},this.readQrcode=!1,this.typeCode=!1,this.PrioridadeChamado=_.t,this.novaManutencaoForm=this.formBuilder.group({prioridade:[_.t.BAIXA],detalhamento:[null,c.kI.required]})}ngOnInit(){}ngAfterViewInit(){}scanEvent(i,a){return 64===i[0].type&&(this.action.stop(),this.scanResult(i[0].value))}clickButtonTypeCod(){this.typeCode=!0}handle(i,a){"start"===a?i[a](f=>{const P=f.find(D=>/back|rear|environment/gi.test(D.label));i.playDevice(P?P.deviceId:f[0].deviceId)}).subscribe(f=>console.log(a,f),alert):i[a]().subscribe(f=>console.log(a,f),alert)}scanResult(i){var a=this;return(0,l.Z)(function*(){const u=JSON.parse(i);a.imobilizadoId=Number(u.elemento.ATexto1);const f=yield a.getImobilizado.get(a.imobilizadoId);var P,D,b;f?(a.readQrcode=!0,a.setorId=null===(P=f.setor)||void 0===P?void 0:P.id,a.setorNome=null===(D=f.setor)||void 0===D?void 0:D.name,a.nomeImobilizado=null!==(b=f.descricao)&&void 0!==b?b:u.elemento.ATexto2):a.readQrcode=!1})()}closeCamera(){this.handle(this.action,"stop"),this.router.navigate(["/home"])}confirm(){var i=this;return(0,l.Z)(function*(){i.novaManutencaoForm.valid?i.manutencaoSrv.saveChamado(i.mapFormToNewChamado(i.novaManutencaoForm.value)).subscribe(()=>{i.navCtrl.navigateBack("/home")}):yield(yield i.alertSrv.create({header:"Erro!",message:"Alguns campos do chamado n\xe3o est\xe3o preenchidos. Preencha todos os campos e tente novamente.",buttons:["Ok"]})).present()})()}buscarPorCodigo(){var i=this;return(0,l.Z)(function*(){yield i.scanResult(`{"elemento":{"ATexto1":${i.buscarCodImobilizado},"ATexto2":"","ATexto3":""}}`)})()}mapFormToNewChamado(i){return{detalhamento:i.detalhamento,funcionario:{id:this.tokenSrv.funcionarioId},imobilizado:{id:this.imobilizadoId},prioridade:i.prioridade,setor:{id:this.setorId},status:t.h.PENDENTE}}}return(E=T).\u0275fac=function(i){return new(i||E)(e.Y36(g.I),e.Y36(o.SH),e.Y36(p.B),e.Y36(o.Br),e.Y36(c.qu),e.Y36(M.U),e.Y36(C.H),e.Y36(s.F0))},E.\u0275cmp=e.Xpm({type:E,selectors:[["app-form"]],viewQuery:function(i,a){if(1&i&&e.Gf(A,5),2&i){let u;e.iGM(u=e.CRH())&&(a.action=u.first)}},standalone:!0,features:[e.jDz],decls:22,vars:11,consts:[[3,"translucent"],["slot","end",4,"ngIf"],[3,"fullscreen"],["collapse","condense"],["size","large"],[1,"scan",3,"hidden"],[3,"config","event"],["action","scanner"],["class","ion-text-center",4,"ngIf"],[3,"hidden"],[1,"ion-justify-content-center"],["size-md","6","size-lg","4","size-xl","3"],[4,"ngIf"],["slot","end"],[3,"click"],[1,"ion-text-center"],["size","large","color","light",1,"full-btn",3,"click"],["slot","icon-only","size","large","name","camera"],["size","12"],["fill","outline",3,"inputMode","ngModel","ngModelChange"],["expand","block","fill","solid","color","primary",3,"disabled","click"],["slot","start","name","checkmark"],[3,"formGroup"],["lines","full","fill","outline"],["readonly","",3,"value"],["formControlName","prioridade"],["lines","none"],[3,"value"],["formControlName","detalhamento",3,"rows"],["size","6"],["expand","block","fill","outline","color","danger",3,"routerLink"],["slot","start","name","close"],["expand","block","fill","solid","color","primary",3,"click"],["slot","start"],["color","primary","defaultHref","/home","text","Sair"]],template:function(i,a){if(1&i){const u=e.EpF();e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Abrir chamado"),e.qZA(),e.YNc(4,d,3,0,"ion-buttons",1),e.qZA()(),e.TgZ(5,"ion-content",2)(6,"ion-header",3)(7,"ion-toolbar")(8,"ion-title",4),e._uU(9,"Abrir chamado"),e.qZA()()(),e.TgZ(10,"div",5)(11,"ngx-scanner-qrcode",6,7),e.NdJ("event",function(P){e.CHM(u);const D=e.MAs(12);return e.KtG(a.scanEvent(P,D))}),e.qZA()(),e.YNc(13,I,2,0,"p",8),e.TgZ(14,"div",9)(15,"ion-grid")(16,"ion-row",10)(17,"ion-col",11),e.YNc(18,x,13,3,"ng-container",12),e.YNc(19,U,38,10,"ng-container",12),e.qZA()()()()(),e._uU(20),e.YNc(21,S,4,0,"ion-footer",12)}if(2&i){const u=e.MAs(12);e.Q6J("translucent",!0),e.xp6(4),e.Q6J("ngIf",u.isStart),e.xp6(1),e.Q6J("fullscreen",!0),e.xp6(5),e.Q6J("hidden",!u.isStart),e.xp6(1),e.Q6J("config",a.config),e.xp6(2),e.Q6J("ngIf",u.isLoading),e.xp6(1),e.Q6J("hidden",u.isStart||u.isLoading),e.xp6(4),e.Q6J("ngIf",!a.readQrcode),e.xp6(1),e.Q6J("ngIf",a.readQrcode),e.xp6(1),e.hij("\n",u," "),e.xp6(1),e.Q6J("ngIf",!u.isStart)}},dependencies:[o.Pc,o.oU,o.YG,o.Sm,o.wI,o.W2,o.fr,o.jY,o.Gu,o.gu,o.pK,o.Ie,o.rH,o.q_,o.B7,o.se,o.Nd,o.g2,o.wd,o.sr,o.U5,o.QI,o.j9,o.cs,o.YI,r.ez,r.O5,c.u5,c._Y,c.JJ,c.JL,c.On,s.Bz,s.rH,v.Mk,v.d$,c.UX,c.sg,c.u],styles:["[_nghost-%COMP%]   .full-btn[_ngcontent-%COMP%]{width:100%;height:220px}[_nghost-%COMP%]   .full-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:72px;height:72px}[_nghost-%COMP%]   ion-radio-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-bottom:8px}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .scan[_ngcontent-%COMP%]{position:absolute;top:var(--offset-top, 56px);bottom:var(--offset-bottom, 0px);left:0;right:0}[_nghost-%COMP%]   ion-input[_ngcontent-%COMP%]{min-height:42px;--padding-end: 8px;--padding-start: 8px;border:1px solid #4e5c5c;border-radius:10px}"]}),T})()},5089:(O,h,n)=>{n.d(h,{I:()=>g});var l=n(8180),r=n(4664),c=n(2096),s=n(3913),o=n(1230),v=n(9468),_=n(8305),t=n(8409);let g=(()=>{var p;class M{constructor(A,d){this.setorSrv=A,this.funcionarioSrv=d,this.statusChamado=[{name:"VALIDACAO PENDENTE",value:o.h.VALIDACAO_PENDENTE,color:"tertiary"},{name:"Pendente",value:o.h.PENDENTE,color:"warning"},{name:"Em andamento",value:o.h.EM_ANDAMENTO,color:"primary"},{name:"Devolvido",value:o.h.DEVOLVIDO,color:"danger"},{name:"Cancelado",value:o.h.CANCELADO,color:"danger"},{name:"VALIDA\xc7\xc3O CONFIRMADA",value:o.h.VALIDACAO_CONFIRMADA,color:"success"}],this.prioridadeChamado=[{name:"Baixa",value:s.t.BAIXA},{name:"M\xe9dia",value:s.t.MEDIA},{name:"Alta",value:s.t.ALTA},{name:"Urgente",value:s.t.URGENTE}]}getPrioridadeNome(A){const d=this.prioridadeChamado.find(I=>I.value===A);return null==d?void 0:d.name}getStatusCor(A){const d=this.statusChamado.find(I=>I.value===A);return null==d?void 0:d.color}getStatusNome(A){const d=this.statusChamado.find(I=>I.value===A);return null==d?void 0:d.name}getSetorNome(A){return this.setorSrv.getById(A).pipe((0,l.q)(1),(0,r.w)(d=>(0,c.of)(d.name)))}getFuncionarioNome(A){return this.funcionarioSrv.getById(A).pipe((0,l.q)(1),(0,r.w)(d=>(0,c.of)(d.name)))}}return(p=M).\u0275fac=function(A){return new(A||p)(v.LFG(_.G),v.LFG(t.e))},p.\u0275prov=v.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),M})()},3959:(O,h,n)=>{n.d(h,{_:()=>s});var l=n(5619),r=n(9468),c=n(9862);let s=(()=>{var o;class v{constructor(t){this.http=t,this.baseUrl=new l.X(this.getBaseUrlFromLocalStorage()||"http://179.190.96.46:160")}getBaseUrlFromLocalStorage(){return localStorage.getItem("baseUrl")}get baseUrl$(){return this.baseUrl.asObservable()}setBaseUrl(t){this.baseUrl.next(t),localStorage.setItem("baseUrl",t),console.log(this.baseUrl)}get(t,e){const g=`${this.baseUrl.value}/${t}`;return e?this.http.get(g,{params:e}):this.http.get(g)}post(t,e){return this.http.post(`${this.baseUrl.value}/${t}`,e)}put(t,e){return this.http.put(`${this.baseUrl.value}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl.value}/${t}`)}}return(o=v).\u0275fac=function(t){return new(t||o)(r.LFG(c.eN))},o.\u0275prov=r.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),v})()},8409:(O,h,n)=>{n.d(h,{e:()=>c});var l=n(9468),r=n(3959);let c=(()=>{var s;class o{constructor(_){this.baseApiService=_,this.apiUrl="api/Funcionario"}getById(_){return this.baseApiService.get(`${this.apiUrl}/Get/${_}`)}getAllChamados(){return this.baseApiService.get(`${this.apiUrl}/GetAllChamados`)}getAllManutencao(){return this.baseApiService.get(`${this.apiUrl}/GetAllManutencao`)}}return(s=o).\u0275fac=function(_){return new(_||s)(l.LFG(r._))},s.\u0275prov=l.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),o})()},5787:(O,h,n)=>{n.d(h,{U:()=>_});var l=n(5861),r=n(708),c=n(9468),s=n(9843),o=n(3959);let v=(()=>{var t;class e{constructor(p){this.baseApiService=p,this.apiUrl="api/Imobilizado"}getById(p){return this.baseApiService.get(`${this.apiUrl}/GetById/${p}`)}}return(t=e).\u0275fac=function(p){return new(p||t)(c.LFG(o._))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),_=(()=>{var t;class e{constructor(p,M,C){this.loaddingCtrl=p,this.alertSrv=M,this.imobilizadoSrv=C}get(p){var M=this;return(0,l.Z)(function*(){var C;const A=yield M.loaddingCtrl.create({message:"Aguarde..."});yield A.present();const d=function(L){return(C=C||(0,l.Z)(function*(U){yield A.dismiss(),yield(yield M.alertSrv.create({header:"Erro!",message:U||"Erro desconhecido, tente novamente",buttons:["Ok"]})).present()})).apply(this,arguments)};if(!p)return yield A.dismiss(),null;const I=yield(0,r.n)(M.imobilizadoSrv.getById(p));try{return I&&I.setor?(yield A.dismiss(),I):(d("Imobilizado n\xe3o encontrado"),null)}catch{return d("Erro ao tentar localizar imobilizado, tente novamente"),null}})()}}return(t=e).\u0275fac=function(p){return new(p||t)(c.LFG(s.HT),c.LFG(s.Br),c.LFG(v))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})()},8467:(O,h,n)=>{n.d(h,{H:()=>s});var l=n(9862),r=n(9468),c=n(3959);let s=(()=>{var o;class v{constructor(t){this.baseApiService=t,this.patchApi="api/Manutencao"}saveChamado(t){return this.baseApiService.post(`${this.patchApi}/SaveChamado`,t)}saveManutencao(t){return this.baseApiService.post(`${this.patchApi}/SaveManutencao`,t)}getAll(t){let e=new l.LE;if(t&&Object.keys(t)){for(const g in t)t.hasOwnProperty(g)&&(e=e.set(g,t[g]));return this.baseApiService.get(`${this.patchApi}/GetAll`,e)}return this.baseApiService.get(`${this.patchApi}/GetAll`)}cancelamentoChamado(t,e){return this.baseApiService.post(`${this.patchApi}/CancelamentoChamado?id=${t}&obs=${e}`,{})}finalizarManutencao(t){return this.baseApiService.post(`${this.patchApi}/FinalizarManutencao?id=${t}`,{})}finalizarChamado(t){return this.baseApiService.post(`${this.patchApi}/FinalizarChamado?id=${t.id}&funcionarioId=${t.funcionarioId}&setorId=${t.setorId}&obs=${t.obs}`,{})}get(t){return this.baseApiService.get(`${this.patchApi}/Get?id=${t}`)}getAllValidacao(t){return this.baseApiService.get(`${this.patchApi}/GetAllValidacao?mecanicoCod=${t}`)}}return(o=v).\u0275fac=function(t){return new(t||o)(r.LFG(c._))},o.\u0275prov=r.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),v})()},8305:(O,h,n)=>{n.d(h,{G:()=>c});var l=n(9468),r=n(3959);let c=(()=>{var s;class o{constructor(_){this.baseApiService=_,this.apiUrl="api/Setor"}getById(_){return this.baseApiService.get(`${this.apiUrl}/Get/${_}`)}getAllManutecao(){return this.baseApiService.get(`${this.apiUrl}/GetAllManutecao`)}}return(s=o).\u0275fac=function(_){return new(_||s)(l.LFG(r._))},s.\u0275prov=l.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),o})()},708:(O,h,n)=>{n.d(h,{n:()=>r});var l=n(6973);function r(c,s){const o="object"==typeof s;return new Promise((v,_)=>{let e,t=!1;c.subscribe({next:g=>{e=g,t=!0},error:_,complete:()=>{t?v(e):o?v(s.defaultValue):_(new l.K)}})})}}}]);