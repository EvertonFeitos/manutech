"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[263],{3913:(C,h,n)=>{n.d(h,{t:()=>l});var l=function(i){return i[i.BAIXA=0]="BAIXA",i[i.MEDIA=1]="MEDIA",i[i.ALTA=2]="ALTA",i[i.URGENTE=3]="URGENTE",i}(l||{})},1230:(C,h,n)=>{n.d(h,{h:()=>l});var l=function(i){return i[i.PENDENTE=0]="PENDENTE",i[i.EM_ANDAMENTO=1]="EM_ANDAMENTO",i[i.DEVOLVIDO=2]="DEVOLVIDO",i[i.CANCELADO=3]="CANCELADO",i[i.VALIDACAO_PENDENTE=4]="VALIDACAO_PENDENTE",i[i.VALIDACAO_CONFIRMADA=5]="VALIDACAO_CONFIRMADA",i}(l||{})},263:(C,h,n)=>{n.r(h),n.d(h,{FormPage:()=>B});var l=n(5861),i=n(6814),c=n(95),s=n(5714),o=n(9843),v=n(7487),d=n(3913),t=n(1230),e=n(9468),g=n(5089),p=n(1475),O=n(5787),D=n(8467);const A=["action"];function u(E,T){if(1&E){const m=e.EpF();e.TgZ(0,"ion-buttons",15)(1,"ion-button",16),e.NdJ("click",function(){e.CHM(m);const r=e.oxw();return e.KtG(r.closeCamera())}),e._uU(2," Fechar "),e.qZA()()}}function P(E,T){1&E&&(e.TgZ(0,"p",17),e._uU(1,"\u231b Carregando..."),e.qZA())}function x(E,T){if(1&E){const m=e.EpF();e.ynx(0),e.TgZ(1,"p"),e._uU(2,"Para iniciar um chamado, clique no bot\xe3o da camera."),e.qZA(),e.TgZ(3,"ion-button",18),e.NdJ("click",function(){e.CHM(m);const r=e.oxw(),_=e.MAs(10);return e.KtG(r.handle(_,"start"))}),e._UZ(4,"ion-icon",19),e.qZA(),e.TgZ(5,"ion-row")(6,"ion-col",20)(7,"p"),e._uU(8,"Ou busque pelo c\xf3digo do imobilizado:"),e.qZA(),e.TgZ(9,"ion-input",21),e.NdJ("ngModelChange",function(r){e.CHM(m);const _=e.oxw();return e.KtG(_.buscarCodImobilizado=r)}),e.qZA()()(),e.TgZ(10,"ion-button",22),e.NdJ("click",function(){e.CHM(m);const r=e.oxw();return e.KtG(r.buscarPorCodigo())}),e._uU(11,"Buscar "),e._UZ(12,"ion-icon",23),e.qZA(),e.BQk()}if(2&E){const m=e.oxw();e.xp6(9),e.Q6J("inputMode","number")("ngModel",m.buscarCodImobilizado),e.xp6(1),e.Q6J("disabled",!m.buscarCodImobilizado)}}const L=function(){return["/home"]};function U(E,T){if(1&E){const m=e.EpF();e.ynx(0),e.TgZ(1,"form",24)(2,"h2"),e._uU(3),e.qZA(),e.TgZ(4,"ion-item-divider"),e._uU(5,"Setor"),e.qZA(),e.TgZ(6,"ion-item",25),e._UZ(7,"ion-input",26),e.qZA(),e.TgZ(8,"ion-radio-group",27)(9,"ion-list",28)(10,"ion-item-divider"),e._uU(11,"Prioridade"),e.qZA(),e.TgZ(12,"ion-item",25)(13,"ion-radio",29),e._uU(14,"Prioridade Baixa"),e.qZA()(),e.TgZ(15,"ion-item",25)(16,"ion-radio",29),e._uU(17,"Prioridade m\xe9dia"),e.qZA()(),e.TgZ(18,"ion-item",25)(19,"ion-radio",29),e._uU(20,"Prioridade alta"),e.qZA()(),e.TgZ(21,"ion-item",25)(22,"ion-radio",29),e._uU(23,"Urgente"),e.qZA()()()(),e.TgZ(24,"ion-item-divider"),e._uU(25,"Detalhamento"),e.qZA(),e.TgZ(26,"ion-item",25),e._UZ(27,"ion-textarea",30),e.qZA(),e.TgZ(28,"ion-grid")(29,"ion-row")(30,"ion-col",31)(31,"ion-button",32),e._uU(32,"Descartar "),e._UZ(33,"ion-icon",33),e.qZA()(),e.TgZ(34,"ion-col",31)(35,"ion-button",34),e.NdJ("click",function(){e.CHM(m);const r=e.oxw();return e.KtG(r.confirm())}),e._uU(36,"Confirma "),e._UZ(37,"ion-icon",23),e.qZA()()()()(),e.BQk()}if(2&E){const m=e.oxw();e.xp6(1),e.Q6J("formGroup",m.novaManutencaoForm),e.xp6(2),e.Oqu(m.nomeImobilizado),e.xp6(4),e.Q6J("value",m.setorNome),e.xp6(6),e.Q6J("value",m.PrioridadeChamado.BAIXA),e.xp6(3),e.Q6J("value",m.PrioridadeChamado.MEDIA),e.xp6(3),e.Q6J("value",m.PrioridadeChamado.ALTA),e.xp6(3),e.Q6J("value",m.PrioridadeChamado.URGENTE),e.xp6(5),e.Q6J("rows",5),e.xp6(4),e.Q6J("routerLink",e.DdM(9,L))}}function y(E,T){1&E&&(e.TgZ(0,"ion-footer")(1,"ion-toolbar")(2,"ion-buttons",35),e._UZ(3,"ion-back-button",36),e.qZA()()())}let B=(()=>{var E;class T{constructor(a,r,_,I,f,M,b,S){this.chamados=a,this.navCtrl=r,this.tokenSrv=_,this.alertSrv=I,this.formBuilder=f,this.getImobilizado=M,this.manutencaoSrv=b,this.router=S,this.config={constraints:{}},this.readQrcode=!1,this.typeCode=!1,this.PrioridadeChamado=d.t,this.scannerTrue=!1,this.novaManutencaoForm=this.formBuilder.group({prioridade:[d.t.BAIXA],detalhamento:[null,c.kI.required]})}ngOnInit(){}ngAfterViewInit(){}scanEvent(a,r){return 64===a[0].type&&(this.scannerTrue=!0,this.action.pause(),setTimeout(()=>(this.scannerTrue=!1,this.action.stop(),this.scanResult(a[0].value)),1e3)),!1}clickButtonTypeCod(){this.typeCode=!0}handle(a,r){var _=this;return(0,l.Z)(function*(){console.log(a),"start"===r?a[r](f=>{const M=f.find(b=>/back|rear|environment/gi.test(b.label));a.playDevice(M?M.deviceId:f[0].deviceId)}).subscribe(f=>{console.log(r,f),_.devices=f},alert):a[r]().subscribe(f=>console.log(r,f),alert)})()}toggleCamera(a){const _=this.devices,I=_[this.action.deviceIndexActive];if(I&&_.length>1){const f=_.find(M=>M.deviceId!==I.deviceId);f&&a.playDevice(f.deviceId)}}scanResult(a){var r=this;return(0,l.Z)(function*(){const _=JSON.parse(a);r.imobilizadoId=Number(_.elemento.ATexto1);const I=yield r.getImobilizado.get(r.imobilizadoId);var f,M,b;I?(r.readQrcode=!0,r.setorId=null===(f=I.setor)||void 0===f?void 0:f.id,r.setorNome=null===(M=I.setor)||void 0===M?void 0:M.name,r.nomeImobilizado=null!==(b=I.descricao)&&void 0!==b?b:_.elemento.ATexto2):r.readQrcode=!1})()}closeCamera(){this.handle(this.action,"stop"),this.router.navigate(["/home"])}confirm(){var a=this;return(0,l.Z)(function*(){a.novaManutencaoForm.valid?a.manutencaoSrv.saveChamado(a.mapFormToNewChamado(a.novaManutencaoForm.value)).subscribe(()=>{a.navCtrl.navigateBack("/home")}):yield(yield a.alertSrv.create({header:"Erro!",message:"Alguns campos do chamado n\xe3o est\xe3o preenchidos. Preencha todos os campos e tente novamente.",buttons:["Ok"]})).present()})()}buscarPorCodigo(){var a=this;return(0,l.Z)(function*(){yield a.scanResult(`{"elemento":{"ATexto1":${a.buscarCodImobilizado},"ATexto2":"","ATexto3":""}}`)})()}mapFormToNewChamado(a){return{detalhamento:a.detalhamento,funcionario:{id:this.tokenSrv.funcionarioId},imobilizado:{id:this.imobilizadoId},prioridade:a.prioridade,setor:{id:this.setorId},status:t.h.PENDENTE}}}return(E=T).\u0275fac=function(a){return new(a||E)(e.Y36(g.I),e.Y36(o.SH),e.Y36(p.B),e.Y36(o.Br),e.Y36(c.qu),e.Y36(O.U),e.Y36(D.H),e.Y36(s.F0))},E.\u0275cmp=e.Xpm({type:E,selectors:[["app-form"]],viewQuery:function(a,r){if(1&a&&e.Gf(A,5),2&a){let _;e.iGM(_=e.CRH())&&(r.action=_.first)}},standalone:!0,features:[e.jDz],decls:23,vars:12,consts:[[3,"translucent"],["slot","end",4,"ngIf"],[3,"fullscreen"],[3,"hidden"],[1,"scanner",3,"src"],[1,"scan"],[1,"box-shadow",3,"config","event"],["action","scanner"],[1,"changing-camera"],["shape","round","size","default",3,"click"],["slot","icon-only","name","sync"],["class","ion-text-center",4,"ngIf"],[1,"ion-justify-content-center"],["size-md","6","size-lg","4","size-xl","3"],[4,"ngIf"],["slot","end"],[3,"click"],[1,"ion-text-center"],["size","large","color","light",1,"full-btn",3,"click"],["slot","icon-only","size","large","name","camera"],["size","12"],["fill","outline",3,"inputMode","ngModel","ngModelChange"],["expand","block","fill","solid","color","primary",3,"disabled","click"],["slot","start","name","checkmark"],[3,"formGroup"],["lines","full","fill","outline"],["readonly","",3,"value"],["formControlName","prioridade"],["lines","none"],[3,"value"],["formControlName","detalhamento",3,"rows"],["size","6"],["expand","block","fill","outline","color","danger",3,"routerLink"],["slot","start","name","close"],["expand","block","fill","solid","color","primary",3,"click"],["slot","start"],["color","primary","defaultHref","/home","text","Sair"]],template:function(a,r){if(1&a){const _=e.EpF();e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Abrir chamado"),e.qZA(),e.YNc(4,u,3,0,"ion-buttons",1),e.qZA()(),e.TgZ(5,"ion-content",2)(6,"div",3),e._UZ(7,"img",4),e.TgZ(8,"div",5)(9,"ngx-scanner-qrcode",6,7),e.NdJ("event",function(f){e.CHM(_);const M=e.MAs(10);return e.KtG(r.scanEvent(f,M))}),e.qZA(),e.TgZ(11,"div",8)(12,"ion-button",9),e.NdJ("click",function(f){return r.toggleCamera(f)}),e._UZ(13,"ion-icon",10),e.qZA()()()(),e.YNc(14,P,2,0,"p",11),e.TgZ(15,"div",3)(16,"ion-grid")(17,"ion-row",12)(18,"ion-col",13),e.YNc(19,x,13,3,"ng-container",14),e.YNc(20,U,38,10,"ng-container",14),e.qZA()()()()(),e._uU(21),e.YNc(22,y,4,0,"ion-footer",14)}if(2&a){const _=e.MAs(10);e.Q6J("translucent",!0),e.xp6(4),e.Q6J("ngIf",_.isStart),e.xp6(1),e.Q6J("fullscreen",!0),e.xp6(1),e.Q6J("hidden",!_.isStart),e.xp6(1),e.Q6J("src",r.scannerTrue?"../../../assets/img/scanner-true.png":"../../../assets/img/scanner.png",e.LSH),e.xp6(2),e.Q6J("config",r.config),e.xp6(5),e.Q6J("ngIf",_.isLoading),e.xp6(1),e.Q6J("hidden",_.isStart||_.isLoading),e.xp6(4),e.Q6J("ngIf",!r.readQrcode),e.xp6(1),e.Q6J("ngIf",r.readQrcode),e.xp6(1),e.hij("\n",_," "),e.xp6(1),e.Q6J("ngIf",!_.isStart)}},dependencies:[o.Pc,o.oU,o.YG,o.Sm,o.wI,o.W2,o.fr,o.jY,o.Gu,o.gu,o.pK,o.Ie,o.rH,o.q_,o.B7,o.se,o.Nd,o.g2,o.wd,o.sr,o.U5,o.QI,o.j9,o.cs,o.YI,i.ez,i.O5,c.u5,c._Y,c.JJ,c.JL,c.On,s.Bz,s.rH,v.Mk,v.d$,c.UX,c.sg,c.u],styles:["[_nghost-%COMP%]   .full-btn[_ngcontent-%COMP%]{width:100%;height:220px}[_nghost-%COMP%]   .full-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:72px;height:72px}[_nghost-%COMP%]   ion-radio-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-bottom:8px}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   ion-input[_ngcontent-%COMP%]{min-height:42px;--padding-end: 8px;--padding-start: 8px;border:1px solid #4e5c5c;border-radius:10px}[_nghost-%COMP%]   .scanner[_ngcontent-%COMP%]{opacity:.8;height:300px;width:381px;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1}[_nghost-%COMP%]   .box-shadow[_ngcontent-%COMP%]{height:215px;width:300px;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:36px}[_nghost-%COMP%]   .changing-camera[_ngcontent-%COMP%]{position:fixed;top:calc(50% + 150px);left:50%;transform:translate(-50%,-50%)}[_nghost-%COMP%]     ngx-scanner-qrcode .origin-video{border-radius:36px!important;top:50%;left:50%;transform:translate(-50%,-50%);position:absolute}"]}),T})()},5089:(C,h,n)=>{n.d(h,{I:()=>g});var l=n(8180),i=n(4664),c=n(2096),s=n(3913),o=n(1230),v=n(9468),d=n(8305),t=n(8409);let g=(()=>{var p;class O{constructor(A,u){this.setorSrv=A,this.funcionarioSrv=u,this.statusChamado=[{name:"VALIDACAO PENDENTE",value:o.h.VALIDACAO_PENDENTE,color:"tertiary"},{name:"Pendente",value:o.h.PENDENTE,color:"warning"},{name:"Em andamento",value:o.h.EM_ANDAMENTO,color:"primary"},{name:"Devolvido",value:o.h.DEVOLVIDO,color:"danger"},{name:"Cancelado",value:o.h.CANCELADO,color:"danger"},{name:"VALIDA\xc7\xc3O CONFIRMADA",value:o.h.VALIDACAO_CONFIRMADA,color:"success"}],this.prioridadeChamado=[{name:"Baixa",value:s.t.BAIXA},{name:"M\xe9dia",value:s.t.MEDIA},{name:"Alta",value:s.t.ALTA},{name:"Urgente",value:s.t.URGENTE}]}getPrioridadeNome(A){const u=this.prioridadeChamado.find(P=>P.value===A);return null==u?void 0:u.name}getStatusCor(A){const u=this.statusChamado.find(P=>P.value===A);return null==u?void 0:u.color}getStatusNome(A){const u=this.statusChamado.find(P=>P.value===A);return null==u?void 0:u.name}getSetorNome(A){return this.setorSrv.getById(A).pipe((0,l.q)(1),(0,i.w)(u=>(0,c.of)(u.name)))}getFuncionarioNome(A){return this.funcionarioSrv.getById(A).pipe((0,l.q)(1),(0,i.w)(u=>(0,c.of)(u.name)))}}return(p=O).\u0275fac=function(A){return new(A||p)(v.LFG(d.G),v.LFG(t.e))},p.\u0275prov=v.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),O})()},3959:(C,h,n)=>{n.d(h,{_:()=>s});var l=n(5619),i=n(9468),c=n(9862);let s=(()=>{var o;class v{constructor(t){this.http=t,this.baseUrl=new l.X(this.getBaseUrlFromLocalStorage()||"http://179.190.96.46:160")}getBaseUrlFromLocalStorage(){return localStorage.getItem("baseUrl")}get baseUrl$(){return this.baseUrl.asObservable()}setBaseUrl(t){this.baseUrl.next(t),localStorage.setItem("baseUrl",t),console.log(this.baseUrl)}get(t,e){const g=`${this.baseUrl.value}/${t}`;return e?this.http.get(g,{params:e}):this.http.get(g)}post(t,e){return this.http.post(`${this.baseUrl.value}/${t}`,e)}put(t,e){return this.http.put(`${this.baseUrl.value}/${t}`,e)}delete(t){return this.http.delete(`${this.baseUrl.value}/${t}`)}}return(o=v).\u0275fac=function(t){return new(t||o)(i.LFG(c.eN))},o.\u0275prov=i.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),v})()},8409:(C,h,n)=>{n.d(h,{e:()=>c});var l=n(9468),i=n(3959);let c=(()=>{var s;class o{constructor(d){this.baseApiService=d,this.apiUrl="api/Funcionario"}getById(d){return this.baseApiService.get(`${this.apiUrl}/Get/${d}`)}getAllChamados(){return this.baseApiService.get(`${this.apiUrl}/GetAllChamados`)}getAllManutencao(){return this.baseApiService.get(`${this.apiUrl}/GetAllManutencao`)}}return(s=o).\u0275fac=function(d){return new(d||s)(l.LFG(i._))},s.\u0275prov=l.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),o})()},5787:(C,h,n)=>{n.d(h,{U:()=>d});var l=n(5861),i=n(708),c=n(9468),s=n(9843),o=n(3959);let v=(()=>{var t;class e{constructor(p){this.baseApiService=p,this.apiUrl="api/Imobilizado"}getById(p){return this.baseApiService.get(`${this.apiUrl}/GetById/${p}`)}}return(t=e).\u0275fac=function(p){return new(p||t)(c.LFG(o._))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),d=(()=>{var t;class e{constructor(p,O,D){this.loaddingCtrl=p,this.alertSrv=O,this.imobilizadoSrv=D}get(p){var O=this;return(0,l.Z)(function*(){var D;const A=yield O.loaddingCtrl.create({message:"Aguarde..."});yield A.present();const u=function(L){return(D=D||(0,l.Z)(function*(U){yield A.dismiss(),yield(yield O.alertSrv.create({header:"Erro!",message:U||"Erro desconhecido, tente novamente",buttons:["Ok"]})).present()})).apply(this,arguments)};if(!p)return yield A.dismiss(),null;const P=yield(0,i.n)(O.imobilizadoSrv.getById(p));try{return P&&P.setor?(yield A.dismiss(),P):(u("Imobilizado n\xe3o encontrado"),null)}catch{return u("Erro ao tentar localizar imobilizado, tente novamente"),null}})()}}return(t=e).\u0275fac=function(p){return new(p||t)(c.LFG(s.HT),c.LFG(s.Br),c.LFG(v))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})()},8467:(C,h,n)=>{n.d(h,{H:()=>s});var l=n(9862),i=n(9468),c=n(3959);let s=(()=>{var o;class v{constructor(t){this.baseApiService=t,this.patchApi="api/Manutencao"}saveChamado(t){return this.baseApiService.post(`${this.patchApi}/SaveChamado`,t)}saveManutencao(t){return this.baseApiService.post(`${this.patchApi}/SaveManutencao`,t)}getAll(t){let e=new l.LE;if(t&&Object.keys(t)){for(const g in t)t.hasOwnProperty(g)&&(e=e.set(g,t[g]));return this.baseApiService.get(`${this.patchApi}/GetAll`,e)}return this.baseApiService.get(`${this.patchApi}/GetAll`)}cancelamentoChamado(t,e){return this.baseApiService.post(`${this.patchApi}/CancelamentoChamado?id=${t}&obs=${e}`,{})}finalizarManutencao(t){return this.baseApiService.post(`${this.patchApi}/FinalizarManutencao?id=${t}`,{})}finalizarChamado(t){return this.baseApiService.post(`${this.patchApi}/FinalizarChamado?id=${t.id}&funcionarioId=${t.funcionarioId}&setorId=${t.setorId}&obs=${t.obs}`,{})}get(t){return this.baseApiService.get(`${this.patchApi}/Get?id=${t}`)}getAllValidacao(t){return this.baseApiService.get(`${this.patchApi}/GetAllValidacao?mecanicoCod=${t}`)}}return(o=v).\u0275fac=function(t){return new(t||o)(i.LFG(c._))},o.\u0275prov=i.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),v})()},8305:(C,h,n)=>{n.d(h,{G:()=>c});var l=n(9468),i=n(3959);let c=(()=>{var s;class o{constructor(d){this.baseApiService=d,this.apiUrl="api/Setor"}getById(d){return this.baseApiService.get(`${this.apiUrl}/Get/${d}`)}getAllManutecao(){return this.baseApiService.get(`${this.apiUrl}/GetAllManutecao`)}}return(s=o).\u0275fac=function(d){return new(d||s)(l.LFG(i._))},s.\u0275prov=l.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),o})()},708:(C,h,n)=>{n.d(h,{n:()=>i});var l=n(6973);function i(c,s){const o="object"==typeof s;return new Promise((v,d)=>{let e,t=!1;c.subscribe({next:g=>{e=g,t=!0},error:d,complete:()=>{t?v(e):o?v(s.defaultValue):d(new l.K)}})})}}}]);